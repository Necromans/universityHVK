import logging

# Настройка логирования
logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger(__name__)

def get_chatbot_response(message, use_gpt_only=False):
    try:
        # Словарь с простыми ответами
        simple_responses = {
            "привет": "Привет! Чем я могу вам помочь?",
            "открыть программу": "Какую программу открыть?",
            "погода": "В каком городе вы хотели бы узнать погоду?",
            "до свидания": "Увидимся позже!",
            "как дела": "У меня всё хорошо! Как я могу вам помочь?",
            "что ты умеешь": "Я могу отвечать на простые вопросы, помогать с программами и погодой!",
            "спасибо": "Пожалуйста! Обращайтесь, если понадобится помощь!",
            "помощь": "Я могу помочь вам с различными задачами. Просто задайте вопрос!",
            "время": "Я не могу показать текущее время, но могу помочь с другими вопросами!",
            "имя": "Меня зовут Чат-бот, приятно познакомиться!"
        }
        
        # Приводим сообщение к нижнему регистру для сравнения
        message_lower = message.lower().strip()
        logger.debug(f"Получено сообщение: {message_lower}")
        
        # Ищем ответ в словаре простых ответов
        logger.debug("Ищем ответ в базе знаний")
        for key in simple_responses:
            if key in message_lower:
                logger.debug(f"Найден ответ для ключа: {key}")
                return simple_responses[key]
        
        # Если ответ не найден
        logger.debug("Ответ не найден в базе знаний")
        return "Извините, я не совсем понял ваш вопрос. Попробуйте переформулировать или спросить что-то другое."
            
    except Exception as e:
        logger.error(f"Общая ошибка в get_chatbot_response: {str(e)}")
        return "Извините, произошла ошибка при обработке вашего запроса. Попробуйте задать другой вопрос." 